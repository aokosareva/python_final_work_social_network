# Итоговая работа

## Задание
### Описание задания
Необходимо разработать backend приложения для социальной сети для обмена фотографиями. 

[Задание](../README.md)

## ERD
![](../erd.png)

`posts` - таблица постов. Содержит ссылку на автора, текст поста, изображение и таймстэмп создания

`comments` - таблица комментариев к постам. Содержит ссылку на пост, текст комментария, ссылку на автора поста, таймстэмп комментирования

`reactions` - таблица реакция на посты. Содержит сслку на пост, ссылку на автора реакции, таймстэмп реакции.
    Так как сейчас реакцией является только "Like", на таблицу наложено ограничение на уникальность автора и поста. То есть в таблице может содержаться только одна записать для одного поста от одного автора.
    Если расширить набор реакций вводом допорнитлеьного поля с кодом реакции, то уникальность должна будет уже определяться набором трех полей, автор , пост и код реакции.

`auth_user`, `authtoken_token` - django таблицы "из коробки", для работы с пользователями и разделения доступа


## Запуск
1. Установить в окружении проекта необходимые пакеты
```commandline
pip install -r requirements.txt
```
2. Создать бд
3. Скопировать .env_template в .env , прописать переменные окружения в .env
```commandline
cp .env_template .env
```
4. Выполнить миграции:
```commandline
python manage.py migrate
```
5. Создать супер пользователя
```commandline
python manage.py createsuperuser
```
6. Запустить проект
```commandline
python manage.py runserver
```
7. В админке создать еще одно пользователя
8. Обоим создать токены


## Проверка
Для проверки удобно пользоваться Postman.
Коллекция запросов для Postman находится в каталлоге [postman](../postman). 

1. Запустить Postman
2. Импортировать Environment из [файла](../postman/Posts-DRF.postman_environment.json)
3. Заполнить в Environment токены ранее созданных пользователей
4. Импортировать Коллекцию из [файла](../postman/Posts-DRF.postman_collection.json)

## Доп задание 
Выполнено одно доп.задание с получением и сохранением геоданных. 
В качестве кодера - Nominatim.
При создании поста передается текст с локацией, при сериализации  полчаются геоданные, сохраняемые в 
модель поста. При отображении происходит обратная операция, по координатам возвращается адрес.


